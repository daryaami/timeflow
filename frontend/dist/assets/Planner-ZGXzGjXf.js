import{_ as y,o as t,c as s,b as n,n as w,e as v,t as u,f as S,g as $,a as g,h as f,F as _,i as p,j as H}from"./index-DLzYWN5n.js";const x={props:{isSidebarHidden:Boolean},emits:{"update:isSidebarHidden":Boolean}},B={class:"planner-header"},T={class:"planner-header__date"},D=n("span",null,"February 2024",-1),V=n("div",{class:"planner-header__date-buttons"},[n("button",{class:"planner-header__date-button planner-header__date-button--prev"}),n("button",{class:"planner-header__date-button planner-header__date-button--next"})],-1);function C(r,e,a,i,d,c){return t(),s("header",B,[n("div",T,[D,V,n("button",{class:w(["sidebar-hide",{rotated:a.isSidebarHidden}]),onClick:e[0]||(e[0]=l=>r.$emit("update:isSidebarHidden",!a.isSidebarHidden))},null,2)])])}const j=y(x,[["render",C]]),E={},F={class:"loading-container"},L=n("div",{class:"loading-progress"},null,-1),N=[L];function z(r,e){return t(),s("div",F,N)}const M=y(E,[["render",z]]),h=r=>{let e=new Date(r),a=e.getHours(),i=e.getMinutes();return a+i/60},b=r=>{const e=new Date(r),a=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0");return`${a}:${i}`},P={class:"event-card__name"},q={class:"event-card__time"},A={__name:"EventCard",props:["event"],setup(r){const e=r,a=v(()=>h(e.event.start.dateTime)*100/24),i=v(()=>(h(e.event.end.dateTime)-h(e.event.start.dateTime))*100/24),d=v(()=>`${b(e.event.start.dateTime)} - ${b(e.event.end.dateTime)}`);return(c,l)=>(t(),s("div",{class:"event-card",style:S({top:`${a.value}%`,height:`${i.value}%`})},[n("span",P,u(r.event.summary),1),n("span",q,u(d.value),1)],4))}},G={class:"planner"},I={key:0,class:"planner__loader-wrapper"},J={key:1,class:"planner__grid-wrapper"},K={class:"planner__days-header"},O={class:"planner__grid"},Q={class:"planner__line-time"},U={__name:"Planner",setup(r){const e=$(),a=$(!0),i=async()=>{let c=await fetch(`${window.location.origin}/planner_api/get_events/`);if(c.ok){let l=await c.json();e.value=l.days,a.value=!1}else throw new Error};try{i()}catch{console.log("ошибка")}const d=[{time:"01:00",percent:100/24},{time:"02:00",percent:200/24},{time:"03:00",percent:300/24},{time:"04:00",percent:400/24},{time:"05:00",percent:500/24},{time:"06:00",percent:600/24},{time:"07:00",percent:700/24},{time:"08:00",percent:800/24},{time:"09:00",percent:900/24},{time:"10:00",percent:1e3/24},{time:"11:00",percent:1100/24},{time:"12:00",percent:1200/24},{time:"13:00",percent:1300/24},{time:"14:00",percent:1400/24},{time:"15:00",percent:1500/24},{time:"16:00",percent:1600/24},{time:"17:00",percent:1700/24},{time:"18:00",percent:1800/24},{time:"19:00",percent:1900/24},{time:"20:00",percent:2e3/24},{time:"21:00",percent:2100/24},{time:"22:00",percent:2200/24},{time:"23:00",percent:2300/24}];return(c,l)=>(t(),s("div",G,[g(j),a.value?(t(),s("div",I,[g(M)])):f("",!0),a.value?f("",!0):(t(),s("div",J,[n("div",K,[(t(!0),s(_,null,p(e.value,o=>(t(),s("span",{class:"planner__date",key:o.date},u(o.date),1))),128))]),n("div",O,[(t(!0),s(_,null,p(e.value,o=>(t(),s("div",{class:"planner__day-column",key:o.date},[(t(!0),s(_,null,p(o.events,(m,k)=>(t(),H(A,{key:k,event:m},null,8,["event"]))),128))]))),128)),(t(),s(_,null,p(d,(o,m)=>n("div",{class:"planner__line",key:m,style:S({top:`${o.percent}%`})},[n("div",Q,u(o.time),1)],4)),64))])]))]))}};export{U as default};
